{% load color_filters %}
{% comment %} <div id="_content" class="flex-1 h-screen overflow-y-auto"> {% endcomment %}
<div class="flex-1 overflow-y-auto min-h-0">
   <div class="m-6" x-data="{ open: false }">
      <button @click="open = !open"
              class="flex items-center gap-1 bg-gray-50 py-3 px-3 border border-gray-200 text-md font-semibold text-gray-700 transition-all duration-200 w-full"
              :class="open ? 'rounded-t-lg border-b-0' : 'rounded-lg'">
         <svg class="w-3 h-3 text-blue-700 transition-transform duration-150"
              :class="{ 'rotate-180': open }"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
         </svg>
         <span>Purchase Orders</span>
      </button>
      <div x-show="open"
           x-transition:enter="transition ease-out duration-300"
           x-transition:enter-start="max-h-0 opacity-0"
           x-transition:enter-end="max-h-96 opacity-100"
           x-transition:leave="transition ease-in duration-200"
           x-transition:leave-start="max-h-96 opacity-100"
           x-transition:leave-end="max-h-0 opacity-0"
           class="border border-t border-gray-200 bg-white rounded-b-lg overflow-hidden">
         <div class="overflow-y-auto max-h-96">
            <div class="relative overflow-x-auto">
               <table class="w-full text-sm text-left text-gray-500">
                  <thead class="text-xs text-gray-500 font-normal uppercase bg-gray-50">
                     <tr>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200">Date</th>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200">Purchase Order#</th>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200 text-right">Quantity</th>
                        <th scope="col" class="px-6 py-3 text-right border-b border-gray-200">Price</th>
                        <th scope="col" class="px-6 py-3 text-right border-b border-gray-200">Total</th>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200">Status</th>
                     </tr>
                  </thead>
                  <tbody class="text-sm text-black font-light">
                     {% if product.po_items.all %}
                        {% for item in product.po_items.all %}
                           <tr class="bg-white border-b border-gray-100 hover:bg-gray-50 cursor-pointer"
                               hx-get="{{ item.purchase_order.get_list_url }}"
                               hx-target="#main_body"
                               hx-indicator="#body_spinner"
                               hx-push-url="true">
                              <td class="px-6 py-3 capitalize">{{ item.purchase_order.order_date|date:"j F Y g:i A" }}</td>
                              <td class="px-6 py-3 capitalize">{{ item.purchase_order.po_number }}</td>
                              <td class="px-6 py-3 capitalize text-right">{{ item.ordered_quantity }}</td>
                              <td class="px-6 py-3 text-right text-blue-500 font-semibold">NGN{{ item.unit_price_at_order|floatformat:"2g" }}</td>
                              <td class="px-6 py-3 text-right text-blue-500 font-semibold">NGN{{ item.total_price|floatformat:"2g" }}</td>
                              <td class="px-6 py-3 capitalize {{ item.status|status_color }}">{{ item.status|upper }}</td>
                           </tr>
                        {% endfor %}
                     {% else %}
                        <tr class="bg-white">
                           <td colspan="6" class="px-6 py-8 text-center text-gray-500">
                              <p>No purchase orders available.</p>
                           </td>
                        </tr>
                     {% endif %}
                  </tbody>
               </table>
            </div>
         </div>
      </div>
   </div>
   <div class="m-6" x-data="{ open: false }">
      <button @click="open = !open"
              class="flex items-center gap-1 bg-gray-50 py-3 px-3 border border-gray-200 text-md font-semibold text-gray-700 transition-all duration-200 w-full"
              :class="open ? 'rounded-t-lg border-b-0' : 'rounded-lg'">
         <svg class="w-3 h-3 text-blue-700 transition-transform duration-150"
              :class="{ 'rotate-180': open }"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
         </svg>
         <span>Sales</span>
      </button>
      <div x-show="open"
           x-transition:enter="transition ease-out duration-300"
           x-transition:enter-start="max-h-0 opacity-0"
           x-transition:enter-end="max-h-96 opacity-100"
           x-transition:leave="transition ease-in duration-200"
           x-transition:leave-start="max-h-96 opacity-100"
           x-transition:leave-end="max-h-0 opacity-0"
           class="border border-t border-gray-200 bg-white rounded-b-lg overflow-hidden">
         <div class="overflow-y-auto max-h-96">
            <div class="relative overflow-x-auto">
               <table class="w-full text-sm text-left text-gray-500">
                  <thead class="text-xs text-gray-500 font-normal uppercase bg-gray-50">
                     <tr>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200">Date</th>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200">Purchase Order#</th>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200 text-right">Quantity</th>
                        <th scope="col" class="px-6 py-3 text-right border-b border-gray-200">Price</th>
                        <th scope="col" class="px-6 py-3 text-right border-b border-gray-200">Total</th>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200">Status</th>
                     </tr>
                  </thead>
                  <tbody class="text-sm text-black font-light">
                     {% if product.po_items.all %}
                        {% for item in product.po_items.all %}
                           <tr class="bg-white border-b border-gray-100 hover:bg-gray-50 cursor-pointer"
                               hx-get="{{ item.purchase_order.get_list_url }}"
                               hx-target="#main_body"
                               hx-indicator="#body_spinner"
                               hx-push-url="true">
                              <td class="px-6 py-3 capitalize">{{ item.purchase_order.order_date|date:"j F Y g:i A" }}</td>
                              <td class="px-6 py-3 capitalize">{{ item.purchase_order.po_number }}</td>
                              <td class="px-6 py-3 capitalize text-right">{{ item.ordered_quantity }}</td>
                              <td class="px-6 py-3 text-right text-blue-500 font-semibold">NGN{{ item.unit_price_at_order|floatformat:"2g" }}</td>
                              <td class="px-6 py-3 text-right text-blue-500 font-semibold">NGN{{ item.total_price|floatformat:"2g" }}</td>
                              <td class="px-6 py-3 capitalize {{ item.status|status_color }}">{{ item.status|upper }}</td>
                           </tr>
                        {% endfor %}
                     {% else %}
                        <tr class="bg-white">
                           <td colspan="6" class="px-6 py-8 text-center text-gray-500">
                              <p>No purchase orders available.</p>
                           </td>
                        </tr>
                     {% endif %}
                  </tbody>
               </table>
            </div>
         </div>
      </div>
   </div>
   <div class="m-6" x-data="{ open: false }">
      <button @click="open = !open"
              class="flex items-center gap-1 bg-gray-50 py-3 px-3 border border-gray-200 text-md font-semibold text-gray-700 transition-all duration-200 w-full"
              :class="open ? 'rounded-t-lg border-b-0' : 'rounded-lg'">
         <svg class="w-3 h-3 text-blue-700 transition-transform duration-150"
              :class="{ 'rotate-180': open }"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
         </svg>
         <span>Serial Items</span>
      </button>
      <div x-show="open"
           x-transition:enter="transition ease-out duration-300"
           x-transition:enter-start="max-h-0 opacity-0"
           x-transition:enter-end="max-h-96 opacity-100"
           x-transition:leave="transition ease-in duration-200"
           x-transition:leave-start="max-h-96 opacity-100"
           x-transition:leave-end="max-h-0 opacity-0"
           class="border border-t border-gray-200 bg-white rounded-b-lg overflow-hidden">
         <div class="overflow-y-auto max-h-96">
            <div class="relative overflow-x-auto">
               <table class="w-full text-sm text-left text-gray-500">
                  <thead class="text-xs text-gray-500 font-normal uppercase bg-gray-50">
                     <tr>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200">Date</th>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200">Purchase Order#</th>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200 text-right">Quantity</th>
                        <th scope="col" class="px-6 py-3 text-right border-b border-gray-200">Price</th>
                        <th scope="col" class="px-6 py-3 text-right border-b border-gray-200">Total</th>
                        <th scope="col" class="px-6 py-3 border-b border-gray-200">Status</th>
                     </tr>
                  </thead>
                  <tbody class="text-sm text-black font-light">
                     {% if product.po_items.all %}
                        {% for item in product.po_items.all %}
                           <tr class="bg-white border-b border-gray-100 hover:bg-gray-50 cursor-pointer"
                               hx-get="{{ item.purchase_order.get_list_url }}"
                               hx-target="#main_body"
                               hx-indicator="#body_spinner"
                               hx-push-url="true">
                              <td class="px-6 py-3 capitalize">{{ item.purchase_order.order_date|date:"j F Y g:i A" }}</td>
                              <td class="px-6 py-3 capitalize">{{ item.purchase_order.po_number }}</td>
                              <td class="px-6 py-3 capitalize text-right">{{ item.ordered_quantity }}</td>
                              <td class="px-6 py-3 text-right text-blue-500 font-semibold">NGN{{ item.unit_price_at_order|floatformat:"2g" }}</td>
                              <td class="px-6 py-3 text-right text-blue-500 font-semibold">NGN{{ item.total_price|floatformat:"2g" }}</td>
                              <td class="px-6 py-3 capitalize {{ item.status|status_color }}">{{ item.status|upper }}</td>
                           </tr>
                        {% endfor %}
                     {% else %}
                        <tr class="bg-white">
                           <td colspan="6" class="px-6 py-8 text-center text-gray-500">
                              <p>No purchase orders available.</p>
                           </td>
                        </tr>
                     {% endif %}
                  </tbody>
               </table>
            </div>
         </div>
      </div>
   </div>
</div>
